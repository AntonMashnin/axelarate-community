---
id: e2
sidebar_position: 2
sidebar_label: Упражнение 2
slug: /exercises/e2
---

# Упражнение 2
Переведите BTC в Ethereum (как обёрнутый актив) и обратно с помощью `c2d2cli`.

C2D2 - это Axelar крос-чейн приложение, которое координирует необходимые транзакции для передачи активов между сетями.
Интерфейс командной строки C2D2 автоматизирует шаги, которые мы выполняли вручную в упражнении 1.

## Статус
Неактивно/Завершено

## Level
Средний

## Отказ от ответственности
:::предупреждение Axelar Network находится в стадии разработки. Ни в коем случае нельзя передавать какие-либо реальные активы с помощью Axelar. Используйте только те токены тестовой сети, которые Вы не боитесь потерять. Axelar не несет ответственности за потерянные активы, или их заморозку или за токены которые не подлежат восстановлению в любом состоянии. Если Вы обнаружите проблему,пожалуйста, сообщите о ней используя данный репозиторий, следуя шаблону.
:::

## Предварительные требования
- Выполните все шаги из этого руководства [Установка при помощи Docker(a)](/setup-docker) или [Установка из исходного кода](/setup-binaries)

## Полезные ссылки
- [Дополнительные команды для получения состояния сети Axelar](/extra-commands)

## Что Вам понадобиться
- Bitcoin testnet кошелек с некоторым количеством tBTC (кран [https://testnet-faucet.mempool.co/](https://testnet-faucet.mempool.co/))
- Кошелек Ethereum в сети Ropsten (мы рекомендуем использовать для этих целей Metamask)
- Немного Ropsten ETH (кран [https://faucet.ropsten.be/](https://faucet.ropsten.be/) или [https://faucet.dimensions.network/](https://faucet.dimensions.network/))

## Присоединитесь к тестовой сети Axelar

Используйте руководство для [настройки среды с помощью Docker](/setup-docker) или [настройки из исходного кода](/setup-binaries) убедитесь, что Ваш сервер обновлен, и Вы получили несколько тестовых монет на свою учетную запись валидатора.

### Получите и выйдите в c2d2cli контейнер
Проверьте [Testnet Release](/testnet-releases) для получения последней доступной версии образов докеров C2D2.

В новом окне терминала войдите в контейнер c2d2cli, запустив:
```bash
./c2d2/c2d2cli.sh --version VERSION
```

### Сгенерируйте ключ Axelar и получите несколько тестовых токенов

Создайте учетную запись блокчейна Axelar c2d2
```bash
c2d2cli keys add c2d2
```

Воспользуйтесь краном Axelar и пополните свой счет C2D2, указав адрес
[facuet](http://faucet.testnet.axelar.dev/). Вы можете получить адрес учетной записи c2d2, запустив

```bash
c2d2cli keys show c2d2 -a
```

### Пополните свой ethereum адрес отправителя
Добавьте учетную запись ethereum в c2d2cli. При появлении запроса задайте пароль `password password`.
```bash
c2d2cli bridge evm accounts add ethereum
```

Вам будет предложено ввести пароль для учетной записи. Обязательно запишите его.



Если Вы использовали свой пароль, а не предложенный ранее `passwordpassword`, Вам необходимо:
1. Ввести свой пароль вручную во время процедуры переноса
2. **или** указывать свой пароль для каждой команды `c2d2cli`, добавив флаг `--evm-passphrase YOUR_PASSWORD`
3. **или** настройте свой пароль, отредактировав файл `/root/.c2d2cli/config.toml`
- Измените значение на свой пароль для ключа `sender-passphrase=`.

Список C2D2's учётных записей:

```bash
c2d2cli bridge evm accounts list ethereum
```

Индекс аккаунта `0` (первый адрес в списке) будет использоваться для отправки транзакций. Перейдите на [https://faucet.ropsten.be/] (https://faucet.ropsten.be/), чтобы получить Ropsten ETH для учетной записи отправителя.

### Получите ERC20 Bitcoin монеты в Ethereum
1. Создайте адрес биткоин депозита. Для этого шага Вам нужно будет указать адрес Ethereum, от которого у Вас есть закрытый ключ. Это будет `[ethereum адрес получателя]` в приведенном ниже примере команды. Затем этот адрес будет связан с сгенерированным адресом биткоин депозита и получит привязанный биткойн (токены сатоши) в тестовой сети Ethereum.
```bash
c2d2cli transfer satoshi [ethereum recipient address] --source-chain bitcoin --dest-chain ethereum --gas=auto --gas-adjustment=1.4
```

Вы увидите биткойн-адрес депозита, который будет показан в консоли

```bash
action:  (2/7) Please deposit Bitcoin to tb1qgfk6v2ut9flwwkraj6t3syvpq22g0xhh2m73atfe79jv3msjwvzqtpuvfc
```

2. **Внешний**: отправьте несколько ТЕСТОВЫХ BTC в тестовой сети Биткойн на адрес биткоин депозита, указанный выше, и дождитесь 6 подтверждений (в биткойн сети).

- ВНИМАНИЕ: **НЕ ОТПРАВЛЯЙТЕ РЕАЛЬНЫЕ АКТИВЫ**
- Вы можете использовать биткойн кран, например [https://testnet-faucet.mempool.co/](https://testnet-faucet.mempool.co/)
- Вы можете следить за состоянием своего депозита с помощью проводника в тестовой сети: [https://blockstream.info/testnet/](https://blockstream.info/testnet/)

Не выходите из интерфейса `c2d2cli`, пока Вы ждете подтверждения Вашего депозита. Он будет следить за блокчейном биткоина, чтобы обнаружить Вашу транзакцию.
- Если на этом шаге происходит сбой или закрытие интерфейса `c2d2cli`, Вы можете повторно запустить команду `deposit-btc` с тем же адресом получателя.
- Если Ваша транзакция получила 6 подтверждений, но `c2d2cli` ее не обнаружил, Вы можете перезапустить утилиту `c2d2cli` и добавить флаг `--bitcoin-tx-prompt`.
- Интерфейс командной строки предложит Вам ввести данные о депозите вручную. Остальная часть процедуры депозита по-прежнему будет автоматизирована.
- `c2d2cli transfer satoshi [ethereum recipient address] --source-chain bitcoin --dest-chain ethereum  --bitcoin-tx-prompt --gas=auto --gas-adjustment=1.4`

Как только Ваша транзакция будет обнаружена, `c2d2cli` будет ждать, пока не получит 6 подтверждений, прежде чем продолжить.

3. C2D2 автоматически выполнит подтверждение биткоин депозита, и выполнит команду подписи и отправки. После завершения процесса Вы увидите следующее сообщение:

```bash
Transferred satoshi to Ethereum address [ethereum recipient address]
```

Теперь Вы можете открыть Metamask и добавить обернутый адрес контракта BTC. `c2d2cli` отобразит адрес контракта следующим образом:
```bash
Using AxelarGateway <address>
Using satoshi token <address>
```

Контракт будет отображаться в метамаске как символ 'Сатоши'. Если Ваш адрес получателя находится в метамаске, у Вас будет количество токенов сатоши в метамаске, равное Вашему депозиту в биткойнах.

### Сжечь обёрнутые ERC20 биткои токены и получить родные сатоши
1. Создайте ethereum адрес вывода. Предоставленный Вами биткойн-адрес будет однозначно связан с адресом депозита на который Вы получите выведенные BTC в тестовой сети Биткойн.

```bash
c2d2cli transfer satoshi [bitcoin recipient address] --source-chain ethereum --dest-chain bitcoin --gas=auto --gas-adjustment=1.4
```

Например:
```bash
c2d2cli transfer satoshi tb1qwtrclv55yy26awl2n40u57uck5xgty4w4h9eww --source-chain ethereum --dest-chain bitcoin --gas=auto --gas-adjustment=1.4
```

Вы увидите адрес депозита Ethereum, полученный в консоли

```bash
action:  (2/5) Please transfer satoshi tokens to Ethereum address 0xf5fccEeF24358fE24C53c1963d5d497BCD3ddF48
 | ✓ Waiting for a withdrawal transaction
```

2. **Внешний**: отправить обёрнутые токены Satoshi на адрес вывода (например, с помощью Metamask). Для выполнения транзакций на Вашем кошельке должен быть какой-то эфир тестовой сети Ropsten.


3. Как только Ваша транзакция о выводе средств будет обнаружена, `c2d2cli` нужно будет дождаться 30 подтверждений в сети Ropsten, прежде чем продолжить.

4. `c2d2cli` автоматизирует подтверждение вывода и сжигание токена сатоши (обернутого BTC).

5. Как только ваши токены сатоши будут сожжены, Вы увидите это сообщение:

```bash
Transferred 5000 satoshi tokens to Bitcoin address [bitcoin recipient address]
```

6. Ваши снятые BTC будут потрачены Вашим адресом получателя, как только произойдет объединение вывода биткойнов. Консолидация будет завершена как отдельный процесс.

Автоматическая служба обрабатывает все ожидающие транзакции из сети Axelar в биткойн несколько раз в день. Вернитесь через 24 часа, чтобы проверить свои монеты на исходном биткойн-адресе в тестовой сети.

:::обратите внимание
Если Ваш локальный узел Axelar не работает, т.е `c2d2cli` не может подключиться к нему для широковещательных транзакций, Вы можете использовать общедоступный узел Axelar для выполнения широковещательных транзакций, добавив вот такой вот флаг `--conf /config.testnet.toml`:

```bash
c2d2cli transfer satoshi [bitcoin recipient address] --source-chain ethereum --dest-chain bitcoin --conf /config.testnet.toml --gas=auto --gas-adjustment=1.4
```
:::
