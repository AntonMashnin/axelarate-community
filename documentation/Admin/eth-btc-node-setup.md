---
id: eth-btc
sidebar_position: 7
sidebar_label: Eth Btc Настройка Ноды
slug: /eth-btc
---
# Настройка Bitcoin и Ethereum нод
Это руководство поможет Вам настроить `тестовую сеть Bitcoin` и `тестовую сеть Ethereum Ropsten` на Вашем локальном компьютере с помощью `Bitcoin Core` и `Geth`. В частности, это полезно для выполнения `Упражнения 3`, когда у Вас нет существующих узлов тестовой сети, или как справочник о том, как настроить Ваши узлы, работающие в другой конфигурации.

## Bitcoin тестнет нода
Настройте узел тестовой сети Биткоин, используя `bitcoind` из `Bitcoin Core`.

1. Загрузите Bitcoin Core.

Найдите руководство по установке для своей машины в [Github репозитории](https://github.com/bitcoin/bitcoin/tree/master/doc). Следуйте инструкциям по загрузке двоичных команд, включая `bitcoind`. Не используйте `bitcoind` команду для того чтобы начать загрузку блокчейна.

2. Найдите директорию в которой расположен бинарный файл `bitcoind`. По-умолчанию он находится в клонированном bitcoin репозитории, в `src` папке. Выполните переход `cd` в каталог, чтобы Вы могли использовать `bitcoind` команду.

3. Убедитесь, что `bitcoind` установлен правильно

```bash
./bitcoind --help
```

4. [Найдите каталог данных по умолчанию](https://en.bitcoin.it/wiki/Data_directory) Вашей Bitcoin ноды. Создайте внутри этого каталога файл с именем `bitcoin.conf`.

например) Для macOS

```bash
mkdir -p "/Users/jacky/Library/Application Support/Bitcoin"
touch "/Users/jacky/Library/Application Support/Bitcoin/bitcoin.conf"
chmod 600 "/Users/jacky/Library/Application Support/Bitcoin/bitcoin.conf"
```

Используйте приведенные выше команды и измените путь к папке, чтобы он был каталогом данных Вашей системы.

5. Создайте файл конфигурации Биткоин узла, использая `bitcoind`.

Используйте [эту утилиту](https://jlopp.github.io/bitcoin-core-config-generator/) для создания содержимого Вашего файла `bitcoin.conf`.
Примечание. Следующие настройки являются общими рекомендациями, которые подходят для большинства настроек. В Вашей настройке могут потребоваться некоторые изменения.

Установите следующее:
* В первую очередь установите Вашу операционную систему.
* В разделе `Bitcoin Core` включите `Режим демона`.
* В разделе `RPC API`, включите `RPC Server`.
* В разделе `RPC API`, найдите `RPC Auth`. Перейдите по ссылке и укажите имя пользователя и пароль. Запишите имя пользователя и пароль, они понадобятся Вам позже. Скопируйте сгенерированное значение и вставьте его обратно в поле `RPC Auth`.
* В разделе `RPC API`, установите `RPC Разрешить IP-адрес` as `0.0.0.0/0`.
* В разделе `RPC API`, установите `Bind RPC Address` как общедоступный IP-адрес для биткоин узла.

Скопируйте содержимое сгенерированного файла `bitcoin.conf` и вставьте его в файл, который Вы создали на последнем шаге.

В разделе `# Options only for testnet [test]` добавьте следующие две строки и сохраните изменения.

```bash
# Listen for JSON-RPC connections on this port
rpcport=8332
```

6. Начните загрузку цепочки тестовой сети Биткойн. Вернитесь в каталог, где находится двоичный файл `bitcoind`, чтобы выполнить следующую команду.

```bash
./bitcoind -testnet
```

Вы должны увидеть сообщение  `Bitcoin Core starting`. Подождите, пока загрузится цепочка тестовой сети Биткойн, это может занять несколько часов.
Если вы хотите следить за прогрессом, найдите файл `debug.log` в каталоге данных Биткойна по умолчанию.

например) Для macOS вы можете запустить
```bash
tail -10 ~/Library/Application\ Support/Bitcoin/testnet3/debug.log
```

Чтобы остановить загрузку и синхронизацию узла тестовой сети Биткойн
```bash
./bitcoin-cli -testnet stop
```

7. Найдите конечную точку RPC для подключения Axelar.

Если Вы использовали указанные выше настройки, Ваша конечная точка RPC должна быть

```bash
http://{USERNAME}:{PASSWORD}@host.docker.internal:8332
```

например)

```bash
http://jacky:mypassword@host.docker.internal:8332
```

Поля `имя пользователя` и `пароль` это значения, которые вы указали для параметра `RPC Auth` на шаге 5. Запишите конечную точку Bitcoin RPC, так как она Вам понадобится позже.

8. ДОПОЛНИТЕЛЬНО: Протестируйте свой биткойн-узел.

После того, как Ваш биткойн-узел полностью синхронизирован, Вы можете отправить ему RPC-запрос с помощью cURL. Используйте следующее и замените имя пользователя и пароль конечной точки RPC.

```bash
curl -X POST http://jacky:mypassword@localhost:8332 \
-H "Content-Type: application/json" \
--data '{"jsonrpc":"2.0","method":"getblockchaininfo","params":[],"id":1}'
```


## Ethereum Ropsten тестнет нода
Настройте узел тестовой сети Ethereum Ropsten с помощью `Geth`.

1. [Установите Geth](https://geth.ethereum.org/docs/install-and-build/installing-geth).

2. Начните загрузку цепочки тестовой сети Ethereum Ropsten. Это может занять много часов.

```bash
geth --ropsten --syncmode "snap" --http --http.vhosts "*"
```

Сначала будет загружено большинство блоков. Затем Ваш узел будет синхронизироваться по мере того, как последние несколько блоков будут до синхронизированы. 
Эта вторая часть может занять много времени.

Чтобы остановить загрузку узла, нажмите `Control C`.

3. Проверьте статус Вашего узла.

Сначала найдите путь к Вашему `ipc` узлу который расположен в
```bash
{Path to Default Ethereum Data Storage}/ropsten/geth.ipc
```

например) на macOS

```bash
/Users/jacky/Library/Ethereum/ropsten/geth.ipc
```

Откройте новую консоль и запустите следующее. Замените `ipc` путь на тот который используется в Вашей системе.
```bash
geth attach ipc:/Users/jacky/Library/Ethereum/ropsten/geth.ipc
```

Проверьте статус вашего узла Ethereum.
```bash
eth.syncing
```

4. Найдите конечную точку RPC для подключения Axelar.

Если Вы использовали указанные Выше настройки, Ваша конечная точка RPC должна быть 

```bash
http://host.docker.internal:8545
```

Запишите конечную точку RPC, она Вам понадобится позже.

5. ДОПОЛНИТЕЛЬНО: Протестируйте свой узел Ethereum.

После того, как Ваш узел Ethereum будет полностью синхронизирован, Вы можете отправить ему запрос RPC с помощью cURL.

```bash
curl -X POST http://localhost:8545 \
-H "Content-Type: application/json" \
--data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'
```
